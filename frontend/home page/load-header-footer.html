async function loadHTML(id, url) {
  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error(`Failed to load ${url}`);
    const html = await res.text();
    document.getElementById(id).innerHTML = html;
  } catch (err) {
    console.error(err);
  }
}

function updateLoginProfileLink() {
  const navMenu = document.getElementById("navMenu");
  if (!navMenu) return;

  // Remove existing login/profile links
  [...navMenu.querySelectorAll(".login-btn, .profile-link")].forEach(el => el.remove());

  const token = localStorage.getItem("token");
  const username = localStorage.getItem("username");

  if (token && username) {
    // User logged in â€” show profile link with username
    const profileLink = document.createElement("a");
    profileLink.href = "/profile/profile.html";
    profileLink.className = "profile-link";
    profileLink.title = "View Profile";
    profileLink.textContent = `ðŸ‘¤ ${username}`;

    // Optional: add logout functionality on click
    profileLink.addEventListener("click", (e) => {
      e.preventDefault();
      if (confirm("Logout?")) {
        localStorage.removeItem("token");
        localStorage.removeItem("username");
        window.location.reload();
      }
    });

    navMenu.appendChild(profileLink);
  } else {
    // User not logged in â€” show login button
    const loginLink = document.createElement("a");
    loginLink.href = "/login page/login.html";
    loginLink.className = "login-btn";
    loginLink.textContent = "Login";
    navMenu.appendChild(loginLink);
  }
}

document.addEventListener("DOMContentLoaded", async () => {
  await loadHTML("header-container", "/header.html");
  updateLoginProfileLink();

  await loadHTML("footer-container", "/footer.html");

  // Make logo clickable (if you used a div instead of <a>)
  const logo = document.querySelector(".logo");
  if (logo) {
    logo.addEventListener("click", () => {
      window.location.href = "/index.html";
    });
  }
});
